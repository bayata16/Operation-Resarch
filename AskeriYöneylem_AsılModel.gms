option optcr=0;
sets
i Turkiyedeki yedi bolge /1*7/
j Sinir disindaki askeri usler /1*11/
k Silah turu /1*15/; 
variables
a(i,j)     i. bolgeden j. usse tasinacak asker miktari
x(i,j,k)   i. bolgeden j. usse tasinacak k silah turu miktari
y(i,j)     i. bolgeden j. usse asker tasinmissa 1 dd 0
e(i,j,k)   i. bolgeden j. usse k silah turu tasinmissa 1 dd 0
f(i,j)     i. bolgeden j. usse silah tasinmissa 1 dd 0
z;
binary variables
y,e,f;
integer  variables
a,x;
parameters
d(i,j)
t(i,j)
r(i,j)
n(j,k)
m(i,j,k)
v(k) k silahinin agirligi kg
/1 0.969, 2 1, 3 0.8, 4 0.79, 5 2.7, 6 2.265, 7 4.25, 8 3.9, 9 3.1, 10 4.2, 11 4.2, 12 11.5, 13 38, 14 4.55, 15 6.4/
g(j) j. ussun asker talebi
/1 250, 2 400, 3 100, 4 100, 5 40000, 6 5000, 7 2500, 8 300, 9 200, 10 70, 11 2000/;
table
c(i,j) i. bolgeden j. bolgeye gonderilebilir asker sayısı
      1       2       3       4       5       6       7       8       9       10       11
1    65      65      65      65      65      65      65      65      65       65       65
2   299     299     299     299     299     299     299     299     299      299      299
3 40400   40400   40400   40400   40400   40400   40400   40400   40400    40400    40400 
4    60      60      60      60      60      60      60      60      60       60       60
5   240     240     240     240     240     240     240     240     240      240      240
6  2400    2400    2400    2400    2400    2400    2400    2400    2400     2400     2400
7  7650    7650    7650    7650    7650    7650    7650    7650    7650     7650     7650;

table
d(i,j) i. bolge ile j. us arası mesafe km
       1       2       3       4       5       6       7       8       9       10       11
1   1156     810     946    1476    1042    1460    2198    3637    7208     2069     4495
2   1636    1041    1177    1451     815    1436    2173    3612    7183     2428     4854
3   1853    1365    1501    1159     359    1144    1882    3321    6892     2079     4501
4   2214    1866    2001    1188    1146    1060    1369    2830    6920      948     3529
5   1768    1253    1389    1043     752    1027    1765    3204    6775     1718     4144
6   2600    2252    2388     760     847     489     848    2310    6492     1126     3379
7   2385    2036    2172    1075    1162     804    1112    2573    6807      847     3270;
table
t(i,j) i. bolgeden j. usse tasinabilecek max kg
       1       2       3       4       5       6       7       8       9       10       11
1    610     633     395     276   77346   10936    3669     388     431      247     2534
2    546     613     318     290   73735   10747    4898     498     448      197     2594
3    647     730     356     257   76258   10628    3632     385     381      172     2423
4    542     718     316     274   74689   10024    3502     360     419      173     2582
5    688     578     383     373   72497   10156    4101     417     412      153     2377
6    622     667     323     353   74968   10570    4903     463     394      237     2348
7    627     697     334     361   74024   10874    3848     479     369      219     2470;
    

table
r(i,j) i. bolge ile j. us arasindaki yolun risk seviyesi yuzde
      1       2       3        4       5       6        7       8       9       10       11
1    41      10      45       40      41      30       14      10      41       26       40
2    53      24      38       10      20      39       10      21      20       23       36
3    42      41      38       20      12      18       14      20      37       16       10 
4    32      34      30       10      41      62       40      29      64       12       37
5    66      40      51       22      16      30       33      24      32       45       50
6    10      20      26       10      44      10       12      42      37       21       42
7    10      16      10       29      12      30       14      34      45       14       48;


table
m(i,j,k) i. bolgeden j. usse gonderilebilir k silahi sayisi
          1       2      3       4       5       6        7       8       9        10       11        12       13       14       15 
1.1    3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
1.2    3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
1.5    3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964 
1.6    3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
1.7    3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964 
1.8    3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
1.9    3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
1.10   3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
1.11   3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
2.1    1442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
1.3    3442     915   1986    1028    2067    1201     2049     712     947      1256     1315       497       13      731      964
1.4    3174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.2    1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.3    1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.4    1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.5    1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.6    1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785   
2.7    1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.8    1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.9    1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.10   1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
2.11   1174     987   1918      49    1539    1595     2044     346     121       478      907       711        8     1276     2785
3.1     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.2     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.3     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.4     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.5     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.6     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.7     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.8     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.9     986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.10    986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
3.11    986     551   1237     492     644     981     2441     549     853       535     1157       401        9      704      398
4.1     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.2     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.3     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.4     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.5     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.6     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.7     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.8     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.9     413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.10    413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
4.11    413     224   1453     451    1190    1453     2066    1136     500        24       79       698       11      395     2090
5.1     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.2     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.3     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.4     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.5     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.6     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.7     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.8     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.9     597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.10    597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
5.11    597     167   2844    1004    1532    1211     2588    1121     766       245       11       731        7      386     1101
6.1     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.2     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.3     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.4     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.5     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.6     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.7     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.8     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.9     883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.10    883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
6.11    883      82   2616     538    1363     852     1710     204     201       388      226       677        8     1011      407
7.1    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.2    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.3    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.4    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.5    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.6    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.7    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.8    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.9    1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.10   1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629
7.11   1081     661   1516     484    1665    1696      590    1094      95       256       96       979       19     2037     2629;
table
n(j,k) j. ussun k silahi talebi
      1       2       3       4       5       6        7        8       9       10       11       12       13       14       15
1    10      16      12       6       7      11        3       13      10       15        7       10        3       14       12
2     6      14      13      19      28      16        3       12       5       28        2       10        1       12        9
3     9       5       6       7       5       6        4        9       3        3        4        5        2        4        6
4     8       3       9       9       4       8        5        7       2        6        6        3        1       10        7
5    89     236     261     353     361     153      216      192     301      117      253      192        5      209      236
6   180     149      67      60     189     274      187      120     202      232      340      229        4      101      234
7    18      50      82      38      42      77       56       99      48       63       61       32        2       39       70
8     9      11      16       2       2       5        8       19      10       10        1        9        1        9       11
9     5       4       8      13       6       7        6       11       8       13        9       10        1        3        2
10    1       2       2       4       4       5        5        2       3        2        1        3        1        3        4
11  101      65     112      56      97      21       36       14      31       53       23       29        2       36       12;
   
equations
kapasite_asker(i,j)   tasinan asker sayisi bolgede bulunan asker sayisini gecemez
kapasite_silah(i,j,k) tasinan silah sayisi bolgede bulunan asker sayisini gecemez
talep_asker1(j)       talep edilen askerler tek bir bolgeden karsilanmali (talep bolunemez)
talep_asker2(j)       uslerin asker talepleri eksiksiz karsilanmalidir
talep_silah1(j)       talep edilen silahlar tek bir bolgeden karsilanmali (talep bolunemez)
talep_silah2(j,k)     uslerin silah talepleri eksiksiz karsilanmalidir
agirlik(i,j)          i. bolge ile j. us arasinda tasinan toplam silah agirligi o yolda tasinabilecek max agirligi gecmemelidir
risk                  tasima gerceklesen yollarin ortalama risk seviyesi yuzde 25 in altinda olmalidir
amac                  toplam kat edilen yol min olmalidir
atama                 i-j arasi k silahi tasimasi olmussa o yol kullanilmistir
;

kapasite_asker(i,j)..   a(i,j)=L=y(i,j)*c(i,j);
kapasite_silah(i,j,k).. x(i,j,k)=L=m(i,j,k)*e(i,j,k);
talep_asker1(j)..     sum(i,y(i,j))=E=1;
talep_asker2(j)..     sum(i,a(i,j))=E=g(j); 
talep_silah1(j)..     sum(i,f(i,j))=E=1;
talep_silah2(j,k)..     sum(i,x(i,j,k))=E=n(j,k);
agirlik(i,j)..        sum(k,x(i,j,k)*v(k))=L=t(i,j);
atama(i,j)..          sum(k,e(i,j,k))=L=15*f(i,j); 
risk..                sum((i,j),(y(i,j)*r(i,j)+f(i,j)*r(i,j)))=L=25*sum((i,j),y(i,j)+f(i,j));
amac..                sum((i,j),d(i,j)*y(i,j)+d(i,j)*f(i,j))=E=z;

model askeriyoneylem /all/;
solve askeriyoneylem using mip minimizing z
display x.L,e.L,f.L,a.L,y.L,risk.L,z.L


